# Calibration Services Package - Phase 1
# Provides ESPHome services for the Home Assistant calibration wizard
# Phase 1: Placeholder services for future calibration implementation

api:
  services:
    # Service: Start collecting calibration samples
    # TODO Phase 3: Implement actual baseline data collection
    - service: start_calibration
      variables:
        duration_s: int  # Duration in seconds to collect samples
      then:
        - logger.log:
            format: "Starting calibration for %d seconds (placeholder)"
            args: ['duration_s']
        # Phase 3: Will implement energy sample collection here

    # Service: Stop calibration and compute thresholds
    # TODO Phase 3: Implement MAD-based threshold calculation
    - service: stop_calibration
      then:
        - logger.log: "Stopping calibration (placeholder)"
        # Phase 3: Will compute Î¼ and Ïƒ from collected samples

    # Service: Reset to factory defaults (Phase 1 parameters)
    - service: reset_to_defaults
      then:
        - logger.log: "Resetting to Phase 1 factory defaults"
        - lambda: |-
            auto engine = id(bed_occupied);
            engine->update_k_on(4.0);
            engine->update_k_off(2.0);
            id(k_on_input).publish_state(4.0);
            id(k_off_input).publish_state(2.0);
